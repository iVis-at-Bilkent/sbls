<!DOCTYPE html>
<html lang="en">

  <link rel="shortcut icon" href="#" />

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Systems Biology Layout Service Demo</title>

    <!-- Semantic UI -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link  rel="stylesheet" href="style.css">
  </head>

  <body>
    
    <div class="ui container">
      <div class="ui vertically divided vertically padded grid">
        <div class="row" style="padding-bottom: 0; padding-top: 0;  margin-top: 20px;">
          <div class="column">
            <h2 class="ui padded header">Systems Biology Layout Service</h2>
          </div>
        </div>        
        <div class="three column row" style="padding-bottom: 0; padding-top: 0;">
          <div class="four wide column">
            <button id="load-file" class="ui button">Load File</button>
            <input id="file-input" type="file" style="display:none" /><br><br>
            <span class="input-file" id="file-name" style="overflow: hidden; text-overflow:ellipsis; width:250px; display:inline-block;"></span>
            <p style="margin-top: 10px" class="input-file" id="file-type"></p>
          </div>
          <div class="six wide column">
            <h3 class="ui header">Layout Settings</h3>
            <div class="ui tiny form">
              <div class="inline fields">
                <label>Select Layout:</label>
                <div class="four wide field">
                  <select id="layoutType">
                    <option value="fcose">fCoSE</option>
                    <option value="cola">Cola</option>                    
                    <option value="cise">CiSE</option>
                    <option value="dagre">Dagre</option>
                    <option value="klay">Klay</option>
                    <option value="avsdf">Avsdf</option>                    
                  </select>
                </div>
                <div class="six wide field">
                  <div class="ui labeled button" id="layout-options" tabindex="0">
                    <a class="ui basic label">
                      Options...
                    </a>
                  </div>
                </div>
              </div>  
            </div>
          </div>
          <div class="six wide column">
            <h3 class="ui header">Image Settings</h3>
            <div class="ui tiny form">
              <div class="inline fields" id="formatRadios">
                <label>Format:</label>
                <div class="field">
                  <div class="ui radio checkbox">
                    <input type="radio" name="format" value="png" checked="checked">
                    <label>PNG</label>
                  </div>
                </div>
                <div class="field">
                  <div class="ui radio checkbox">
                    <input type="radio" name="format" value="jpg">
                    <label>JPG</label>
                  </div>
                </div>
                <div class="field">
                  <div class="ui radio checkbox">
                    <input type="radio" name="format" value="svg">
                    <label>SVG</label>
                  </div>
                </div>                
              </div>
              <div class="inline fields">
                <div class="six wide field">
                  <label>Width:</label>
                  <input type="number" id="imageWidth" value="1280" min="1">
                </div>
                <div class="six wide field">
                  <label>Height:</label>
                  <input type="number" id="imageHeight" value="720" min="1">
                </div>
              </div>
              <div class="inline fields">   
                <label>Color:</label>
                <div class="three wide field">
                  <input type="color" id="color" value="#ffffff">
                </div>
                <label> or </label>
                <div class="seven wide field">
                  <div class="field">
                    <select id="colorScheme" disabled>
                      <option value="black_white">Black-White</option>
                      <option value="greyscale">Greyscale</option>
                      <option value="bluescale">Bluescale</option>
                      <option value="red_blue">Red-Blue</option>
                      <option value="green_brown">Green-Brown</option>
                      <option value="purple_brown">Purple-Brown</option>
                      <option value="purple_green">Purple-Green</option>
                      <option value="grey_red">Grey-Red</option>
                    </select>
                  </div>
                </div>
              </div>
              <div class="inline fields">
                <label>Background:</label>
                <div class="three wide field">                  
                  <input type="color" id="imageBackground" value="#ffffff">
                </div>
              </div>
            </div>
          </div>        
        </div>
        <div class="row" style="padding-bottom: 0; padding-top: 0">
          <div class="center aligned column">
            <button id="applyLayout" class="ui primary button">Apply Layout</button>
          </div>
        </div>
        <div class="two column row" style="padding-bottom: 0; padding-top: 0">
          <div class="seven wide column">
            <div class="ui form">
              <div class="field">
                <div class="inline fields">
                  <h3 class="ui header" style="margin-bottom: 0; margin-right: 10px">JSON</h3>
                  <button class="ui icon mini button" id="downloadJSON" title="Download as JSON file">
                    <i class="download icon"></i>               
                  </button> 
                </div>
                <textarea id="resultText" rows="20"></textarea>
              </div>  
            </div>
          </div>            
          <div class="nine wide centered column">
            <div class="ui form">
              <div class="field">
                <div class="inline fields">
                  <h3 class="ui header" style="margin-bottom: 0; margin-right: 10px">Image</h3>
                  <button class="ui icon mini button" id="downloadImage" title="Download as image">
                    <i class="download icon"></i>               
                  </button> 
                </div>
                <div class="ui segment" style='width: 620px; height: 370px'>
                  <img style="cursor:pointer;" class="ui centered big image" id="resultImage" onclick="window.open(this.src, '_blank');">
                </div>
              </div>  
            </div>           
          </div>                    
        </div>
      </div>
      
      <div id="fcose-layout-table" title="fCoSE Options" class="ui mini modal" >
          <!-- fcose layout table will be shown here -->
      </div>
      <div id="cola-layout-table" title="Cola Options" class="ui mini modal" style="width:310px;">
          <!-- cola layout table will be shown here -->
      </div>      
    </div>
    
    <script type="text/template" id="fcose-settings-template">
      <table class="ui single line compact table layoutTable">
      <thead>
        <tr><th colspan="2" style="font-size:18px">fCoSE Layout Options</th>
      </tr></thead>
      
      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Node Dimensions Include Labels </span>
        </td>
        <td class="centered">
          <input id="nodeDimensionsIncludeLabels1" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
        </td>
      </tr>

      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Uniform Node Dimensions </span>
        </td>
        <td class="centered">
          <input id="uniformNodeDimensions1" type="checkbox"<% if(uniformNodeDimensions){ %> checked <%}%> >
        </td>
      </tr>
      
      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Pack Components </span>
        </td>
        <td class="centered">
          <input id="packComponents1" type="checkbox"<% if(packComponents){ %> checked <%}%> >
        </td>
      </tr>
      
      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Tile </span>
        </td>
        <td class="centered">
            <input id="tile1" type="checkbox"<% if(tile){ %> checked <%}%> >       
        </td>
      </tr>      

      <tr>
        <td>
          <span class="add-on layout-text"> Padding </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="padding1" type="number"min="0" value = <%= padding %> >
            </div>
          </div>         
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Node Repulsion </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="nodeRepulsion1" type="number" min="0" value = <%= nodeRepulsion %> >
            </div>
          </div>
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Ideal Edge length </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="idealEdgeLength1" type="number"min="0" value = <%= idealEdgeLength %> >
            </div>
          </div>                  
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Edge Elasticity </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="edgeElasticity1" type="number"min="0.01" step="0.01" value = <%= edgeElasticity %> >
            </div>
          </div>                  
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Nesting Factor </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="nestingFactor1" type="number"min="0" step="0.01" value = <%= nestingFactor %> >
            </div>
          </div>        
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Number of Iterations </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="numIter1" type="number"min="0" value = <%= numIter %> >
            </div>
          </div>                   
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Tiling Padding Vertical </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="tilingPaddingVertical1" type="number"min="0" value = <%= tilingPaddingVertical %> >
            </div>
          </div>                   
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Tiling Padding Horizontal </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="tilingPaddingHorizontal1" type="number"min="0" value = <%= tilingPaddingHorizontal %> >
            </div>
          </div>                   
        </td>
      </tr>      
      
      <tr>
        <td>
          <span class="add-on layout-text"> Gravity </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="gravity1" type="number"min="0" step="0.01" value = <%= gravity %> >
            </div>
          </div>                  
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Gravity Range </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="gravityRange1" type="number"min="0" step="0.01" value = <%= gravityRange %> >
            </div>
          </div>                   
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Gravity Compound </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="gravityCompound1" type="number"min="0" step="0.01" value = <%= gravityCompound %> >
            </div>
          </div>                  
        </td>
      </tr>      
      
      <tr>
        <td>
          <span class="add-on layout-text"> Gravity Range Compound </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="gravityRangeCompound1" type="number" min="0" step="0.01" value = <%= gravityRangeCompound %> >
            </div>
          </div>                   
        </td>
      </tr>


      <tr>
        <td>
          <span class="add-on layout-text"> Initial Energy On Incremental </span>
        </td>
        <td style="padding-bottom: 0.4em !important;">
          <div class="ui tiny form">
            <div class="field">
              <input id="initialEnergyOnIncremental1" type="number" value = <%= initialEnergyOnIncremental %> >
            </div>
          </div>                
        </td>
      </tr>
      
      <tr id="layout-option-buttons1" class="layout-option-buttons">
        <td colspan=2>
          <button class="ui button" id="default-layout1">Default</button>
                    <button class="ui primary button" id="save-layout1" style="float: right">Save</button>
        </td>
      </tr>
      
      </table>
    </script>

    <script type="text/template" id="cola-settings-template">
      <table class="ui single line compact table layoutTable">
      <thead>
        <tr><th colspan="2" style="font-size:18px">Cola Layout Options</th>
      </tr></thead>
      
      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Node Dimensions Include Labels </span>
        </td>
        <td class="centered">
          <input id="nodeDimensionsIncludeLabels2" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
        </td>
      </tr>
      
      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Avoid Overlap </span>
        </td>
        <td class="centered">
          <input id="avoidOverlap2" type="checkbox"<% if(avoidOverlap){ %> checked <%}%> >
        </td>
      </tr>
      
      <tr style="height: 32.4px;">
        <td>
          <span class="add-on layout-text"> Handle Disconnected </span>
        </td>
        <td class="centered">
          <input id="handleDisconnected2" type="checkbox"<% if(handleDisconnected){ %> checked <%}%> >
        </td>
      </tr>      

      <tr>
        <td>
          <span class="add-on layout-text"> Padding </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="padding2" type="number"min="0" value = <%= padding %> >
            </div>
          </div>         
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Node Spacing </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="nodeSpacing2" type="number" min="0" value = <%= nodeSpacing %> >
            </div>
          </div>
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Edge length </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="edgeLength2" type="number"min="0" value = <%= edgeLength %> >
            </div>
          </div>                  
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Edge SymDiff Length </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="edgeSymDiffLength2" type="number"min="0" value = <%= edgeSymDiffLength %> >
            </div>
          </div>                  
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Edge Jaccard Length </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="edgeJaccardLength2" type="number"min="0" value = <%= edgeJaccardLength %> >
            </div>
          </div>        
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> Unconstraint Iterations </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="unconstrIter2" type="number"min="0" value = <%= unconstrIter %> >
            </div>
          </div>                   
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> User Constraint Iterations </span>
        </td>
        <td>
          <div class="ui tiny form">
            <div class="field">
              <input id="userConstIter2" type="number"min="0" value = <%= userConstIter %> >
            </div>
          </div>                   
        </td>
      </tr>
      
      <tr>
        <td>
          <span class="add-on layout-text"> All Constraint Iterations </span>
        </td>
        <td style="padding-bottom: 0.4em !important;">
          <div class="ui tiny form">
            <div class="field">
              <input id="allConstIter2" type="number"min="0" value = <%= allConstIter %> >
            </div>
          </div>                   
        </td>
      </tr>      
      
      <tr id="layout-option-buttons2" class="layout-option-buttons">
        <td colspan=2>
          <button class="ui button" id="default-layout2">Default</button>
          <button class="ui primary button" id="save-layout2"  style="float: right">Save</button>          
        </td>
      </tr>
      
      </table>
    </script>    
   
    <script>
      let port = window.location.port;
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-migrate-3.3.2.min.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.0/backbone-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>

    <script src="js/layouts.js"></script>
    <script src="js/main.menu.js"></script>
    
  </body>

</html>