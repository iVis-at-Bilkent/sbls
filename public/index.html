<!DOCTYPE html>
<html lang="en">

  <link rel="shortcut icon" href="#" />

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>SyBLaRS Demo</title>

    <!-- Semantic UI -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link  rel="stylesheet" href="style.css">
  </head>

  <body>

    <div class="ui container">
      <div class="ui vertically padded grid">
        <div class="row" style="padding-bottom: 0; padding-top: 0;  margin-top: 15px;">          
          <div class="four wide column">
            <a href="https://www.cs.bilkent.edu.tr/~ivis/" target="_blank">
              <img class="ui image" src="img/ivis-logo-long.png" style="height: 50px;">
            </a>
          </div>
          <div class="eight wide column">           
            <h2 class="ui padded center aligned header" style="margin-top: 15px;">
              Systems Biology Layout & Rendering Service
            </h2>
          </div>
          <div class="four wide column">
            <img class="ui image" id="informationModal" src="img/information-button.svg" title="About SyBLaRS" style="height: 30px; margin-top: 15px; float: right">
          </div>
        </div>
        <div class="ui divider"></div>
        <div class="two column row" style="padding-bottom: 0; padding-top: 0;">
          <div class="five wide column">
            <h3 class="ui header">File</h3>
            <div class="ui tiny form">
              <div class="field">
             <!--   <label id="load-file" class="underline">Open File...</label> -->
                <div class="inline fields">
                  <label>Open Sample:</label>
                  <div class="six wide field" style="width: 47%!important;">
                    <select required id="sampleType">
                      <option value="">Select...</option>
                      <option value="SBGNML_Sample.sbgn">SBGNML Sample</option>
                      <option value="SBML_Sample.sbml">SBML Sample</option>                    
                      <option value="GraphML_Sample.graphml">GraphML Sample</option>
                      <option value="JSON_Sample.json">JSON Sample</option>                   
                    </select>
                  </div>
                </div>
                <div class="ui labeled button" id="load-file" tabindex="0">
                  <a class="ui basic label">
                    Open File...
                  </a>
                </div>             
              </div>
            </div>
            <input id="file-input" type="file" style="display:none" />
            <span class="input-file" id="file-name" style="overflow: hidden; text-overflow:ellipsis; margin-top: 10px; width:250px; font-weight: bold; display:inline-block;"></span>
            <p style="margin-top: 6px" class="input-file" id="file-type"></p>            
          </div>
          <!-- <div class="two wide column"></div> -->
          <div id='settings' class="eleven wide column">
            <h3 class="ui header">Settings</h3>
            <div class="ui top attached tabular menu">
              <a class="item active" data-tab="first">Layout</a>
              <a class="item" data-tab="second">Image</a>
              <a class="item" data-tab="third">Query</a>
            </div>
            <div id="layoutTab" class="ui bottom attached tab segment active disabled" data-tab="first" style="height: 250px; pointer-events: none;">
              <div class="ui tiny form">
                <div class="inline fields">
                  <label>Layout Style:</label>
                  <div class="four wide field">
                    <select id="layoutType">
                      <option value="fcose">fCoSE</option>
                      <option value="cola">CoLa</option>                    
                      <option value="cise">CiSE</option>
                      <option value="dagre">Dagre</option>
                      <option value="klay">Klay</option>
                      <option value="avsdf">Avsdf</option>
                      <option value="preset">Preset</option>                     
                    </select>
                  </div>
                  <img class="ui image" id="layoutSettingsDefault" title="Reset to default" src="img/settings.svg" style="height: 25px; width: 25px; margin-left: 10px; margin-top: 0px; float: right; padding: 2.5px">
                </div>
                <div id="fcose-layout-table" class="ui mini" >
                  <!-- fcose layout table will be shown here -->
                </div>
                <div id="cola-layout-table" class="ui mini" >
                  <!-- cola layout table will be shown here -->
                </div>
                <div id="cise-layout-table" class="ui mini" >
                  <!-- cise layout table will be shown here -->
                </div>
                <div id="dagre-layout-table" class="ui mini" >
                  <!-- dagre layout table will be shown here -->
                </div>
                <div id="klay-layout-table" class="ui mini" >
                    <!-- klay layout table will be shown here -->
                </div>
                <div id="avsdf-layout-table" class="ui mini" >
                    <!-- avsdf layout table will be shown here -->
                </div>
                <div id="preset-layout-table" class="ui mini" >
                    <!-- preset layout table will be shown here -->
                </div>
              </div>
            </div>
            <div id="imageTab" class="ui bottom attached tab segment disabled" data-tab="second"  style="height: 250px; pointer-events: none;">
              <div class="ui tiny form">
                <div class="inline fields" id="formatRadios">
                  <label>Format:</label>
                  <div class="field">
                    <div class="ui radio checkbox">
                      <input type="radio" id="pngRadio" name="format" value="png" checked="checked">
                      <label>PNG</label>
                    </div>
                  </div>
                  <div class="field">
                    <div class="ui radio checkbox">
                      <input type="radio" id="jpgRadio" name="format" value="jpg">
                      <label>JPG</label>
                    </div>
                  </div>
                  <div class="field">
                    <div class="ui radio checkbox">
                      <input type="radio" id="svgRadio" name="format" value="svg">
                      <label>SVG</label>
                    </div>
                  </div>
                  <img class="ui image" id="imageSettingsDefault" title="Reset to default" src="img/settings.svg" style="height: 25px; width: 25px; margin-left: 165px; margin-top: 0px; float: right; padding: 2.5px">
                </div>
                <div class="inline fields">
                  <div class="five wide field">
                    <label>Width:</label>
                    <input type="number" id="imageWidth" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" value="1280" min="1">
                  </div>
                  <div class="five wide field">
                    <label>Height:</label>
                    <input type="number" id="imageHeight" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" value="720" min="1">
                  </div>
                </div>
                <div class="inline fields">
                  <label>Color:</label>
                  <div class="two wide field">
                    <input type="color" id="color" value="#9ecae1">
                  </div>
                  <label> or </label>
                  <div class="seven wide field">
                    <div class="field">
                      <select id="colorScheme" disabled>
                        <option value="bluescale">Bluescale</option>
                        <option value="greyscale">Greyscale</option>
                        <option value="red_blue">Red-Blue</option>
                        <option value="green_brown">Green-Brown</option>
                        <option value="purple_brown">Purple-Brown</option>
                        <option value="purple_green">Purple-Green</option>
                        <option value="grey_red">Grey-Red</option>
                        <option value="black_white">Black-White</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="inline fields">
                  <label>Background:</label>
                  <div class="two wide field">                  
                    <input type="color" disabled id="imageBackground" value="#ffffff">
                  </div>
                   <div class="ui checkbox" style="margin-left: 5px;">
                      <input type="checkbox" id='transparent' checked name="example">
                      <label>Transparent</label>
                    </div>
                </div>
              </div>
            </div>
            <div id="queryTab" class="ui bottom attached tab segment disabled" data-tab="third" style="height: auto; min-height: 250px; margin-bottom: 14px; pointer-events: none;">
              <div id="queryForm" class="ui tiny form">
                <div class="inline fields">
                  <label>Query Type:</label>
                  <div class="four wide field">
                    <select id="queryType">
                      <option value="">Select Query</option>
                      <option value="shortestPath">Shortest Path</option>
                      <option value="kNeighborhood">k-Neighborhood</option>
                      <option value="commonStream">Common Stream</option>
                      <option value="pathsBetween">Paths Between</option>
                      <option value="pathsFromTo">Paths From To</option>
                    </select>
                  </div>
                  <div class="field" style="margin-left: 15px">
                    <label style="margin-right: 10px">Crop to Result:</label>
                    <div class="ui checkbox">
                      <input type="checkbox" id="cropToResult" style="margin-top: 4px">
                      <label style="margin-top: 4px"></label>
                    </div>
                  </div>
                  <img class="ui image" id="querySettingsDefault" title="Reset to default" src="img/settings.svg" style="height: 25px; width: 25px; margin-left: 10px; margin-top: 0px; float: right; padding: 2.5px">
                </div>
                <div id="shortestPath-query-table" class="ui mini" >
                  <!-- shortestPath query table will be shown here -->
                </div>
                <div id="kNeighborhood-query-table" class="ui mini" >
                  <!-- kNeighborhood query table will be shown here -->
                </div>
                <div id="commonStream-query-table" class="ui mini" >
                  <!-- commonStream query table will be shown here -->
                </div>
                <div id="pathsBetween-query-table" class="ui mini" >
                  <!-- pathsBetween query table will be shown here -->
                </div>
                <div id="pathsFromTo-query-table" class="ui mini" >
                  <!-- pathsFromTo query table will be shown here -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" style="padding-bottom: 0; padding-top: 0">
          <div class="center aligned column">
            <button id="applyLayout" class="ui primary button">Apply Layout</button>
          </div>
        </div>
        <div class="ui divider"></div>
        <div class="two column row" style="padding-bottom: 0; padding-top: 0">
          <div class="seven wide column" style="margin-top: 11.5px">
            <div class="ui form">
              <div class="field">
                <div class="inline fields">
                  <h3 class="ui header" style="margin-bottom: -3px; margin-right: 7.5px">JSON</h3>
                  <img class="ui image" id="downloadJSON" src="img/download.svg" title="Download JSON file" style="height: 25px; width: 25px; padding: 2.5px">
                </div>
                <textarea id="resultText" rows="19"></textarea>
              </div>  
            </div>
          </div>            
          <div class="nine wide centered column" style="margin-top: 11.5px">
            <div class="ui form">
              <div class="field">
                <div class="inline fields">
                  <h3 class="ui header" style="margin-bottom: -3px; margin-right: 7.5px">Image</h3>
                  <img class="ui image" id="downloadImage" src="img/download.svg" title="Download image" style="height: 25px; width: 25px; padding: 2.5px;"> 
                </div>
                <div id="imageArea" class="ui segment" style="width: 615px; height: 345px; padding: 0px;">
                  <img style="cursor:pointer; padding: 0px !important;" class="ui centered huge image" id="resultImage" onclick="window.open(this.src, '_blank');">
                </div>
              </div>  
            </div>           
          </div>                    
        </div>
        <div class="ui divider"></div>
        <div class="row" style="padding-bottom: 0; padding-top: 0; font-size: 13px;">
          <div class="center aligned column">
            Copyright © 2021 - present by 
            <a href="https://www.cs.bilkent.edu.tr/~ivis/" target="_blank">
             Bilkent i-Vis Research Lab.
            </a> All rights reserved. 
          </div>
        </div>        
      </div>
      
      <div id="information-modal" class="ui small modal information" >
        <i class="close icon"></i>
        <div class="ui center aligned header" id="about">
          ABOUT
        </div>        
        <div class="scrolling content" style="text-align: justify;">
          <b>Systems Biology Layout & Rendering Service (SyBLaRS)</b> is a web service to lay out graphs in SBGNML, SBML, GraphML and JSON 
          formats and produce corresponding images of the layouts in the backend. This page presents a sample client-side demo for SyBLaRS. <br><br>
          To use the demo, please follow these steps:
          <ul>
            <li>Open a file in one of the following formats: SBGNML, SBML, GraphML or JSON (or open one of the sample files)</li>
            <li>Select a layout style and modify corresponding layout options as desired</li>
            <li>Select an image format and image options as desired</li>
            <li>Click on "Apply Layout" button</li>
            <li>Now you can view/download layout info in "JSON" field and corresponding image in "Image" field</li>
          </ul>
		  
          <p class="address-text">
            A video illustrating how to use this demo can be found on <a href="https://youtu.be/XGuOvYePHwA" target="_blank">YouTube</a>. 
          </p> 		  
			
            Here are the notations used for
            <div class="ui accordion">
              <div class="title">
                <i class="dropdown icon"></i>
                SBGNML Stylesheet
              </div>
              <div class="content">
                <img class="image" src="https://raw.githubusercontent.com/iVis-at-Bilkent/syblars/main/img/SBGNML_stylesheet.svg" width="700px">
              </div>
              <div class="title">
                <i class="dropdown icon"></i>
                SBML Stylesheet
              </div>
              <div class="content">
                <img class="image" src="https://raw.githubusercontent.com/iVis-at-Bilkent/syblars/main/img/SBML_stylesheet.svg" width="700px">
              </div>
              <div class="title">
                <i class="dropdown icon"></i>
                GraphML & JSON Stylesheet
              </div>
              <div class="content">
                <img class="image" src="https://raw.githubusercontent.com/iVis-at-Bilkent/syblars/main/img/GraphML&JSON_stylesheet.svg" width="700px">
              </div>
            </div> 
			<p style="margin-bottom: 7px"></p>
          <p class="address-text">
            The source code of the service together with further details/help can be found <a href="https://github.com/iVis-at-Bilkent/syblars" target="_blank">here</a>. 
          </p>          
          <p class="address-text">
            See <a href="https://github.com/iVis-at-Bilkent/syblars#credits" target="_blank">here</a> for third-party libraries used.
          </p>          
        </div>
        <div class="actions">
          <p style="text-align: center; display: block;">Bilkent i-Vis Research Lab, Ankara, Turkey
          <a href="mailto:ivisatbilkent@gmail.com" target="_top" style="display: block;">ivisatbilkent@gmail.com</a>
          </p>
        </div>        
      </div>
    </div>
    
    <!-- layout templates -->
    <script type="text/template" id="fcose-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Node Dimensions Include Labels </span>
            <input id="nodeDimensionsIncludeLabels1" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Uniform Node Dimensions </span>
            <input id="uniformNodeDimensions1" type="checkbox"<% if(uniformNodeDimensions){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Pack Components </span>
            <input id="packComponents1" type="checkbox"<% if(packComponents){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Tile </span>
            <input id="tile1" type="checkbox"<% if(tile){ %> checked <%}%> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding1" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" type="number" min="0" value = <%= padding %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Node Repulsion </span>
            <input id="nodeRepulsion1" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" type="number" min="0" value = <%= nodeRepulsion %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Ideal Edge Length </span>
            <input id="idealEdgeLength1" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" type="number" min="0" value = <%= idealEdgeLength %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Edge Elasticity </span>
            <input id="edgeElasticity1" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" type="number" min="0" step="0.1" value = <%= edgeElasticity %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Nesting Factor </span>
            <input id="nestingFactor1" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" type="number" min="0" step="0.1" value = <%= nestingFactor %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Number of Iter. </span>
            <input id="numIter1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= numIter %> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Gravity </span>
            <input id="gravity1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= gravity %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Gravity Range </span>
            <input id="gravityRange1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= gravityRange %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Gravity Compound </span>
            <input id="gravityCompound1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= gravityCompound %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Gravity Range Comp. </span>
            <input id="gravityRangeCompound1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= gravityRangeCompound %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Tiling Padding Vert. </span>
            <input id="tilingPaddingVertical1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= tilingPaddingVertical %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Tiling Padding Hor. </span>
            <input id="tilingPaddingHorizontal1" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= tilingPaddingHorizontal %> >
          </div>
        </div>
        <button class="ui button" id="fcose-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="fcose-save-layout" style="float: right; display:none" >Save</button>
      </div>
    </script>

    <script type="text/template" id="cola-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Node Dimensions Include Labels </span>
            <input id="nodeDimensionsIncludeLabels2" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Avoid Overlap </span>
            <input id="avoidOverlap2" type="checkbox"<% if(avoidOverlap){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Handle Disconnected </span>
            <input id="handleDisconnected2" type="checkbox"<% if(handleDisconnected){ %> checked <%}%> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding2" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= padding %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Convergence Threshold </span>
            <input id="convergenceThreshold2" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" type="number" min="0" step="0.01" value = <%= convergenceThreshold %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Node Spacing </span>
            <input id="nodeSpacing2" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= nodeSpacing %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Edge Length </span>
            <input id="edgeLength2" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= edgeLength %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Edge SymDiff Length </span>
            <input id="edgeSymDiffLength2" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= edgeSymDiffLength %> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Edge Jaccard Length </span>
            <input id="edgeJaccardLength2" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= edgeJaccardLength %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Unconstraint Iterations </span>
            <input id="unconstrIter2" type="number" min="0" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" value = <%= unconstrIter %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> User Constraint Iterations </span>
            <input id="userConstIter2" type="number" min="0" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" value = <%= userConstIter %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> All Constraint Iterations </span>
            <input id="allConstIter2" type="number" min="0" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0"value = <%= allConstIter %> >
          </div>
          <div class="field">
          </div>
        </div>
        <button class="ui button" id="cola-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="cola-save-layout" style="float: right; display:none" >Save</button>                      
      </div>
    </script>

    <script type="text/template" id="cise-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Node Dimensions Include Labels </span>
            <input id="nodeDimensionsIncludeLabels3" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Pack Components </span>
            <input id="packComponents3" type="checkbox"<% if(packComponents){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Allow Nodes Inside Circle </span>
            <input id="allowNodesInsideCircle3" type="checkbox"<% if(allowNodesInsideCircle){ %> checked <%}%> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= padding %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Node Separation </span>
            <input id="nodeSeparation3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= nodeSeparation %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Inter-Cluster Edge Length Coeff. </span>
            <input id="idealInterClusterEdgeLengthCoefficient3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= idealInterClusterEdgeLengthCoefficient %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Max Ratio Of Nodes Inside Circle </span>
            <input id="maxRatioOfNodesInsideCircle3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= maxRatioOfNodesInsideCircle %> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Spring Coefficient </span>
            <input id="springCoeff3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= springCoeff %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Node Repulsion </span>
            <input id="nodeRepulsion3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= nodeRepulsion %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Gravity </span>
            <input id="gravity3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= gravity %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Gravity Range </span>
            <input id="gravityRange3" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= gravityRange %> >
          </div>
        </div>
        <button class="ui button" id="cise-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="cise-save-layout" style="float: right; display:none" >Save</button>                       
      </div>
    </script>
                 
    <script type="text/template" id="dagre-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Node Dimensions Include Labels </span>
            <input id="nodeDimensionsIncludeLabels4" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding4" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= padding %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Node Separation </span>
            <input id="nodeSep4" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= nodeSep %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Edge Separation </span>
            <input id="edgeSep4" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= edgeSep %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Rank Separation </span>
            <input id="rankSep4" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= rankSep %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Edge Weight </span>
            <input id="edgeWeight4" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= edgeWeight %> >
          </div>
        </div>
        <button class="ui button" id="dagre-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="dagre-save-layout" style="float: right; display:none" >Save</button>                      
      </div>
    </script>

    <script type="text/template" id="klay-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Node Dimensions Include Labels </span>
            <input id="nodeDimensionsIncludeLabels5" type="checkbox"<% if(nodeDimensionsIncludeLabels){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Compact Components </span>
            <input id="compactComponents5" type="checkbox"<% if(klay.compactComponents){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Feedback Edges </span>
            <input id="feedbackEdges5" type="checkbox"<% if(klay.feedbackEdges){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Layout Hierarchy </span>
            <input id="layoutHierarchy5" type="checkbox"<% if(klay.layoutHierarchy){ %> checked <%}%> > 
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Merge Edges </span>
            <input id="mergeEdges5" type="checkbox"<% if(klay.mergeEdges){ %> checked <%}%> >  
          </div>
        </div>
        <div class="inline fields">
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Merge Hier. Crossing Edges </span>
            <input id="mergeHierarchyCrossingEdges5" type="checkbox"<% if(klay.mergeHierarchyCrossingEdges){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Add Unnec. Bendpoints </span>
            <input id="addUnnecessaryBendpoints5" type="checkbox"<% if(klay.addUnnecessaryBendpoints){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Route Self Loop Inside </span>
            <input id="routeSelfLoopInside5" type="checkbox"<% if(klay.routeSelfLoopInside){ %> checked <%}%> >
          </div>
          <div class="field" style="margin-right: 5px">
            <span class="add-on layout-text" style="margin-right: 5px"> Separate Conn. Components </span>
            <input id="separateConnectedComponents5" type="checkbox"<% if(klay.separateConnectedComponents){ %> checked <%}%> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= padding %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Aspect Ratio </span>
            <input id="aspectRatio5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= klay.aspectRatio %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Border Spacing </span>
            <input id="borderSpacing5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= klay.borderSpacing %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Edge Spacing Factor </span>
            <input id="edgeSpacingFactor5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= klay.edgeSpacingFactor %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> In-Layer Spacing Factor </span>
            <input id="inLayerSpacingFactor5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= klay.inLayerSpacingFactor %> >
          </div>
        </div>
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Linear Seg. Defl. Damp. </span>
            <input id="linearSegmentsDeflectionDampening5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" step="0.1" value = <%= klay.linearSegmentsDeflectionDampening %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Randomization Seed </span>
            <input id="randomizationSeed5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= klay.randomizationSeed %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Spacing </span>
            <input id="spacing5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= klay.spacing %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Thoroughness </span>
            <input id="thoroughness5" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= klay.thoroughness %> >
          </div>
          <div class="field">
          </div>
        </div>
        <button class="ui button" id="klay-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="klay-save-layout" style="float: right; display:none" >Save</button>                              
      </div>
    </script>
                   
    <script type="text/template" id="avsdf-settings-template">
      <div class="ui tiny form">
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding6" style="float: right" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= padding %> >
          </div>
          <div class="field">
            <span class="add-on layout-text"> Node Separation </span>
            <input id="nodeSeparation6" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= nodeSeparation %> >
          </div>
          <div class="field">
          </div>
          <div class="field">
          </div>
          <div class="field">
          </div>
        </div>
        <button class="ui button" id="avsdf-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="avsdf-save-layout" style="float: right; display:none" >Save</button>                      
      </div>
    </script>
    
    <script type="text/template" id="preset-settings-template">
      <div class="ui tiny form">
        <div class="equal width fields">
          <div class="field">
            <span class="add-on layout-text"> Padding </span>
            <input id="padding7" style="float: right" type="number" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="0" value = <%= padding %> >
          </div>
          <div class="field">
          </div>
          <div class="field">
          </div>
          <div class="field">
          </div>
          <div class="field">
          </div>
        </div>
        <button class="ui button" id="preset-default-layout" style="display:none">Default</button>
        <button class="ui primary button" id="preset-save-layout" style="float: right; display:none" >Save</button>                      
      </div>
    </script>

    <!-- query templates -->
    <script type="text/template" id="shortestPath-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <label>Source Node:</label>
          <div class="three wide field">
            <select id="sourceNodesSP"></select>
          </div>
          <label>Target Node:</label>
          <div class="three wide field">
            <select id="targetNodesSP"></select>
          </div>
        </div>
        <div class="inline fields">
          <label>Source:</label>
          <div class="two wide field">
            <input type="color" id="sourceColorSP" value= <%= sourceColor %>>
          </div>
          <label>Target:</label>
          <div class="two wide field">
            <input type="color" id="targetColorSP" value= <%= targetColor %>>
          </div>
          <label>Path:</label>
          <div class="two wide field">
            <input type="color" id="pathColorSP" value= <%= pathColor %>>
          </div>
        </div>
        <div class="inline fields">
          <label>Highlight Width:</label>
          <div class="two wide field">
            <input type="number" id="highlightWidthSP" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= highlightWidth %>>
          </div>
        </div>
        <button class="ui button" id="shortestPath-default-query" style="display:none">Default</button>
        <button class="ui primary button" id="shortestPath-save-query" style="float: right; display:none" >Save</button>
      </div>
    </script>

    <script type="text/template" id="kNeighborhood-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <label>Source Nodes:</label>
          <select multiple="" id="sourceNodesKN" class="ui tiny dropdown"></select>
        </div>
        <div class="inline fields">
          <label>k (limit):</label>
          <div class="two wide field">
            <input type="number" id="limitKN" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= limit %>>
          </div>
          <label>Direction:</label>
          <div class="three wide field">
            <select id="directionKN">
              <option value="BOTHSTREAM">Both Stream</option>
              <option value="UPSTREAM">Up Stream</option>
              <option value="DOWNSTREAM">Down Stream</option>
            </select>
          </div>          
        </div>
        <div class="inline fields">
          <label>Source:</label>
          <div class="two wide field">
            <input type="color" id="sourceColorKN" value= <%= sourceColor %>>
          </div>
          <label>Path:</label>
          <div class="two wide field">
            <input type="color" id="pathColorKN" value= <%= pathColor %>>
          </div>
          <label>Highlight Width:</label>
          <div class="two wide field">
            <input type="number" id="highlightWidthKN" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= highlightWidth %>>
          </div>          
        </div>
        <button class="ui button" id="kNeighborhood-default-query" style="display:none">Default</button>
        <button class="ui primary button" id="kNeighborhood-save-query" style="float: right; display:none" >Save</button>
      </div>
    </script>

    <script type="text/template" id="commonStream-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <label>Source Nodes:</label>
          <select multiple="" id="sourceNodesCS" class="ui tiny dropdown"></select>
        </div>
        <div class="inline fields">
          <label>k (limit):</label>
          <div class="two wide field">
            <input type="number" id="limitCS" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= limit %>>
          </div>
          <label>Direction:</label>
          <div class="three wide field">
            <select id="directionCS">
              <option value="BOTHSTREAM">Both Stream</option>
              <option value="UPSTREAM">Up Stream</option>
              <option value="DOWNSTREAM">Down Stream</option>
            </select>
          </div>          
        </div>
        <div class="inline fields">
          <label>Source:</label>
          <div class="two wide field">
            <input type="color" id="sourceColorCS" value= <%= sourceColor %>>
          </div>
          <label>Target:</label>
          <div class="two wide field">
            <input type="color" id="targetColorCS" value= <%= targetColor %>>
          </div>          
          <label>Path:</label>
          <div class="two wide field">
            <input type="color" id="pathColorCS" value= <%= pathColor %>>
          </div>
          <label>Highlight Width:</label>
          <div class="two wide field">
            <input type="number" id="highlightWidthCS" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= highlightWidth %>>
          </div>          
        </div>
        <button class="ui button" id="commonStream-default-query" style="display:none">Default</button>
        <button class="ui primary button" id="commonStream-save-query" style="float: right; display:none" >Save</button>
      </div>
    </script>

    <script type="text/template" id="pathsBetween-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <label>Source Nodes:</label>
          <div class="four wide field">
            <select multiple="" id="sourceNodesPB" class="ui tiny dropdown"></select>
          </div>
          <label>k (limit):</label>
          <div class="two wide field">
            <input type="number" id="limitPB" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= limit %>>
          </div>          
        </div>
        <div class="inline fields">
          <label>Source:</label>
          <div class="two wide field">
            <input type="color" id="sourceColorPB" value= <%= sourceColor %>>
          </div>
          <label>Path:</label>
          <div class="two wide field">
            <input type="color" id="pathColorPB" value= <%= pathColor %>>
          </div>
          <label>Highlight Width:</label>
          <div class="two wide field">
            <input type="number" id="highlightWidthPB" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= highlightWidth %>>
          </div>          
        </div>
        <button class="ui button" id="pathsBetween-default-query" style="display:none">Default</button>
        <button class="ui primary button" id="pathsBetween-save-query" style="float: right; display:none" >Save</button>
      </div>
    </script>

    <script type="text/template" id="pathsFromTo-settings-template">
      <div class="ui tiny form">
        <div class="inline fields">
          <label>Source Nodes:</label>
          <select multiple="" id="sourceNodesPFT" class="ui tiny dropdown"></select>
        </div>
        <div class="inline fields">
          <label>Target Nodes:</label>
          <select multiple="" id="targetNodesPFT" class="ui tiny dropdown"></select>
        </div>        
        <div class="inline fields">
          <label>k (limit):</label>
          <div class="two wide field">
            <input type="number" id="limitPFT" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= limit %>>
          </div>
          <label>Further Distance:</label>
          <div class="two wide field">
            <input type="number" id="furtherDistancePFT" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= furtherDistance %>>
          </div>          
          <label>Direction:</label>
          <div class="three wide field">
            <select id="directionPFT">
              <option value="DIRECTED">Directed</option>
              <option value="UNDIRECTED">Undirected</option>
            </select>
          </div>          
        </div>
        <div class="inline fields">
          <label>Source:</label>
          <div class="two wide field">
            <input type="color" id="sourceColorPFT" value= <%= sourceColor %>>
          </div>
          <label>Target:</label>
          <div class="two wide field">
            <input type="color" id="targetColorPFT" value= <%= targetColor %>>
          </div>          
          <label>Path:</label>
          <div class="two wide field">
            <input type="color" id="pathColorPFT" value= <%= pathColor %>>
          </div>
          <label>Highlight Width:</label>
          <div class="two wide field">
            <input type="number" id="highlightWidthPFT" oninput="this.value = !!this.value && Math.abs(this.value) >= 0 ? Math.abs(this.value) : 0" min="1" value= <%= highlightWidth %>>
          </div>          
        </div>
        <button class="ui button" id="pathsFromTo-default-query" style="display:none">Default</button>
        <button class="ui primary button" id="pathsFromTo-save-query" style="float: right; display:none" >Save</button>
      </div>
    </script>
   
    <script>
      let port = window.location.port;
    </script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.13.1/underscore-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.4.0/backbone-min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js"></script>

    <script src="js/queries.js"></script>
    <script src="js/layouts.js"></script>
    <script src="js/main.menu.js"></script>
    
  </body>

</html>